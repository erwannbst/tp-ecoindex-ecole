const langSelect=document.getElementById("lang-select"),tradElements=document.querySelectorAll("[data-trad]"),langs=[{name:"Fran\xe7ais",tag:"fr"},{name:"English",tag:"en"},{name:"Espanol",tag:"es"},{name:"Italiano",tag:"it"},{name:"Deutsch",tag:"de"}];let currentLang="fr";function tradPage(){fetch(`/api/${currentLang}`).then(a=>a.json()).then(a=>{console.log(a),console.log(tradElements),tradElements.forEach(d=>{let c=a[d.dataset.trad],f=/\$\{(a|sub|code);([^;}]*)(;([^\}]*))?\}/,b,e=10;for(;null!==(b=c.match(f))&&e>0;){switch(b[1]){case"a":c=c.replace(b[0],`<a class="facteurs__link" href="${b[4]}">${b[2]}</a>`);break;case"sub":c=c.replace(b[0],`<sub>${b[2]}</sub>`);break;default:c=c.replace(b[0],`<span class="${b[1]}">${b[2]}</span>`)}e--}d.innerHTML=c})}).catch(()=>{el.innerText=""})}langSelect.addEventListener("change",function(){currentLang=this.value,tradPage()}),langs.forEach(a=>{let b=langSelect.appendChild(document.createElement("option"));b.value=a.tag,b.innerText=a.name}),tradPage();const spawnList=Array.from(document.querySelectorAll("[data-spawn]")),intervalId=setInterval(()=>{let a=spawnList.pop();a.removeAttribute("data-spawn"),0===spawnList.length&&clearInterval(intervalId)},150),augmentDom=document.getElementById("augment-dom"),keywords=["ecoindex","\xe9coconception","\xe9mission de CO2","eau","mesure d'impact","environnement","num\xe9rique responsable","normes","ademe","analyse de cycle de vie","acv","avenir","eco conception","\xe9conomie circulaire","\xe9valuation","indicateurs"],DOM_SIZE_GOAL=1e4,DOM_LOOP_REQUIRED=1e4/keywords.length;for(let i=0;i<DOM_LOOP_REQUIRED;i++){let a=augmentDom.appendChild(document.createElement("div"));keywords.forEach(c=>{let b=a.appendChild(document.createElement("span"));b.innerText=c,b.classList.add("augment__span")})}